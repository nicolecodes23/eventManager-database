<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>
        <%= event.event_title %> - Bookings
    </title>
    <link rel="stylesheet" href="/css/attendee-event.css">
</head>

<body>
    <!--main container to wrap all content-->
    <div class="container">
        <main class="main-content">
            <!--header section containing title, return btn and avatar-->
            <header class="topbar">
                <h1>Attendee Event Page</h1>
                <a href="/attendee">
                    <button class="return-att-home-btn">
                        Return to Attendee Home
                    </button>
                </a>
                <section class="avatar">
                    <img src="/assets/Attendee.png" alt="Women in yoga headband">
                </section>
            </header>
            <!--main content area split into event details and booking section-->
            <div class="content">
                <!-- Section showing event information -->
                <section class="event-details">
                    <p class="event-desc">
                        <%= event.event_description %>
                    </p>
                    <h2 class="event-title">
                        <%= event.event_title %>
                    </h2>


                    <% if (event.image_filename) { %>
                        <div class="event-image">
                            <img src="/assets/<%= event.image_filename %>" alt="<%= event.event_title %>">
                        </div>
                        <% } %>

                            <p class="event-date"><strong>Date:</strong>
                                <%= event.event_datetime %>
                            </p>
                </section>

                <!-- Section containing the booking form -->
                <section class="booking-form-container">
                    <!-- Form to submit booking details -->
                    <form action="/attendee/event/<%= event.event_ID %>/book" method="POST" class="booking-form">
                        <div class="form-group">
                            <label for="attendee_name">Attendee Name: </label>
                            <input type="text" id="attendee_name" name="attendee_name" required>
                        </div>

                        <div class="form-group">
                            <label>Event:</label>
                            <input type="text" id="event_title" value="<%= event.event_title %>" readonly>
                        </div>

                        <div class="form-group">
                            <label>Date:</label>
                            <input type="text" id="event_date" value="<%= event.event_datetime %>" readonly>
                        </div>

                        <fieldset class="ticket-selection">
                            <legend>Book Your Session</legend>

                            <% if (ticketAvailability.full> 0) { %>
                                <div class="ticket-controls">
                                    <input type="number" id="full_quantity" name="full_quantity" value="0" min="0"
                                        max="<%= ticketAvailability.full %>">
                                    <span class="ticket-price">$<%= ticketPrices.full.toFixed(2) %></span>
                                    <span class="ticket-available">
                                        <%= ticketAvailability.full %> tickets left
                                    </span>
                                </div>
                                <% } else { %>
                                    <div class="ticket-controls sold-out-message">
                                        <span>Full Price Tickets Sold Out</span>
                                    </div>
                                    <% } %>


                                        <% if (ticketAvailability.concession> 0) { %>
                                            <div class="ticket-controls">
                                                <input type="number" id="concession_quantity" name="concession_quantity"
                                                    value="0" min="0" max="<%= ticketAvailability.concession %>">
                                                <span class="ticket-price">$<%= ticketPrices.concession.toFixed(2) %>
                                                        </span>
                                                <span class="ticket-available">
                                                    <%= ticketAvailability.concession %> tickets left
                                                </span>
                                            </div>
                                            <% } else { %>
                                                <div class="ticket-controls sold-out-message">
                                                    <span> Concession Tickets Sold Out</span>
                                                </div>
                                                <% } %>

                        </fieldset>

                        <button type="submit" class="btn-book">Book Now</button>
                    </form>
                </section>
            </div>
        </main>
    </div>
    <script src="/js/attendee-event.js"></script>
</body>

</html>